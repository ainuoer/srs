# yaml format config for SRS.
# @see full.conf for detail config.

---
listen:
  - 1935
  - 1936
max_connections: 1000
srs_log_tank: console
daemon: off

http_api:
  enabled: on
  listen: 1985

http_server:
  enabled: on
  listen: 8080
  dir: ./objs/nginx/html

vhost:
  - srs.yaml.test.com:
      enabled: on

      hls:
        enabled: on

      http_remux:
        enabled: on
        mount: '[vhost]/[app]/[stream].flv'
        
      transcode: &ref_0
        enabled: on
        ffmpeg: ./objs/ffmpeg/bin/ffmpeg
        
        engine:
          - ffsuper:
              enabled: on
              iformat: flv
              vfilter:
                i: ./doc/ffmpeg-logo.png
                filter_complex: 'overlay=10:10'
              vcodec: libx264
              vbitrate: 1500
              vfps: 25
              vwidth: 768
              vheight: 320
              vthreads: 12
              vprofile: main
              vpreset: medium
              vparams:
                t: 100
                coder: 1
                b_strategy: 2
                bf: 3
                refs: 10
              acodec: libfdk_aac
              abitrate: 70
              asample_rate: 44100
              achannels: 2
              aparams:
                'profile:a': aac_low
              oformat: flv
              output: 'rtmp://127.0.0.1:[port]/[app]?vhost=[vhost]/[stream]_[engine]'
              
          - ffhd:
              enabled: on
              vcodec: libx264
              vbitrate: 1200
              vfps: 25
              vwidth: 1382
              vheight: 576
              vthreads: 6
              vprofile: main
              vpreset: medium
              vparams: null
              acodec: libfdk_aac
              abitrate: 70
              asample_rate: 44100
              achannels: 2
              aparams: null
              output: 'rtmp://127.0.0.1:[port]/[app]?vhost=[vhost]/[stream]_[engine]'
              
  - srs.yaml.test01.com:
      enabled: on
      
      hls:
        enabled: on
        
      http_remux:
        enabled: on
        mount: '[vhost]/[app]/[stream].flv'
        
      transcode: *ref_0
...
